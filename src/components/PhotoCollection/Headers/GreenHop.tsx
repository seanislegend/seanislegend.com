'use client';

import {useRef} from 'react';
import Image from 'next/image';
import Markdown from '@/components/Markdown';
import AnimateAppearence from '@/components/UI/AnimateAppearence';
import Container from '@/components/UI/Container';
import useSiteHeaderTitle from '@/hooks/useSiteHeaderTitle';
import {type Props} from './Default';

const GreenHopHeader: React.FC<React.PropsWithChildren<Props>> = ({collection}) => {
    const containerRef = useRef<HTMLDivElement>(null);
    useSiteHeaderTitle(containerRef, collection.pageTitle || '', collection.title || '', '');

    const title1 = collection.pageTitle?.split(':')[0];
    const title2 = collection.pageTitle?.split(':')[1];
    // we add the hero photo here to get around collection layouts using thumbnail sizes
    // on the grid. for the hero we need the full size photo.
    const heroPhoto = collection.photosCollection.items[0];

    return (
        <>
            <Container
                className="relative pt-6 pb-10 sm:py-12 xl:py-20"
                data-slot="page-header"
                ref={containerRef}
            >
                <h1 className="sr-only">{collection.pageTitle}</h1>
                <AnimateAppearence delay={0.2} duration={2} initialY={20}>
                    <svg
                        aria-hidden="true"
                        className="h-auto w-full"
                        fill="none"
                        viewBox="0 0 644 44"
                    >
                        <title>{title1}</title>
                        <path
                            fill="#2C370B"
                            d="M619.4 28.261c.59 3.717 3.245 6.077 7.611 6.077 3.068 0 5.192-1.239 5.133-3.54-.118-2.301-2.006-3.481-7.316-4.72-10.62-2.478-16.166-6.372-16.166-13.098 0-7.965 6.844-12.98 17.346-12.98 9.617 0 16.284 5.841 17.287 14.75l-11.386.472c-.295-3.835-2.655-6.136-6.195-6.136-3.363 0-5.605 1.652-5.31 4.13.177 2.478 3.067 3.481 7.02 4.366 10.502 2.006 16.402 6.195 16.402 13.039 0 8.083-6.962 12.921-16.992 12.921-10.915 0-18.348-5.664-18.938-14.75zM578.147 28.261c.59 3.717 3.245 6.077 7.611 6.077 3.068 0 5.192-1.239 5.133-3.54-.118-2.301-2.006-3.481-7.316-4.72-10.62-2.478-16.166-6.372-16.166-13.098 0-7.965 6.844-12.98 17.346-12.98 9.617 0 16.284 5.841 17.287 14.75l-11.387.472c-.295-3.835-2.655-6.136-6.195-6.136-3.363 0-5.605 1.652-5.31 4.13.177 2.478 3.068 3.481 7.021 4.366 10.502 2.006 16.402 6.195 16.402 13.039 0 8.083-6.962 12.921-16.992 12.921-10.915 0-18.349-5.664-18.939-14.75zM522.021 42.834 537.125.944h13.157l15.104 41.89h-11.8l-2.36-6.903h-15.104l-2.36 6.903zm17.169-15.871h9.027l-4.484-13.275zM488.248 42.834V.944h11.564v32.627h18.231v9.263zM482.236 42.834h-6.667l-.472-5.546c-2.183 4.071-6.785 6.49-12.744 6.49-11.741 0-20.178-9.204-20.178-21.83S450.612 0 463.238 0c9.912 0 16.815 5.605 18.88 15.281l-11.977.472c-.944-4.189-3.422-6.49-7.198-6.49-5.959 0-8.909 5.074-8.909 12.685 0 7.552 3.009 12.567 8.909 12.567 4.13 0 6.549-2.301 7.434-6.195h-7.552v-7.729h19.411zM404.242 43.778c-13.275 0-21.24-8.378-21.24-21.83 0-13.57 7.965-21.948 21.24-21.948s21.181 8.378 21.181 21.948c0 13.452-7.906 21.83-21.181 21.83m-9.263-21.83c0 7.965 3.363 12.567 9.263 12.567 5.959 0 9.322-4.602 9.322-12.567 0-8.024-3.363-12.685-9.322-12.685-5.9 0-9.263 4.661-9.263 12.685M380.439.944v9.263h-12.213v32.627h-11.623V10.207H344.39V.944zM296.325.944h31.034v9.263h-19.47v7.021h18.762v9.204h-18.762v7.139h19.942v9.263h-31.506zM252.421.944h11.741l13.865 23.895V.944h11.623v41.89h-12.095l-13.57-22.715v22.715h-11.564zM233.522.944h11.564v41.89h-11.564zM191.174 42.834V.944h15.812c12.449 0 18.585 3.481 18.585 11.623 0 4.897-3.009 7.847-8.673 8.555v.118c7.021.708 10.443 3.894 10.443 9.735 0 7.847-6.018 11.859-17.995 11.859zm11.564-8.85h7.021c3.363 0 6.018-1.298 6.018-4.307s-2.596-4.366-6.018-4.366h-7.021zm0-16.225h5.546c3.304 0 5.723-1.239 5.723-3.953 0-2.832-2.36-4.012-5.723-4.012h-5.546zM123.07.944h15.222l8.85 26.609L155.874.944h15.34v41.89h-11.623V18.408l-8.378 24.249h-8.201l-8.378-24.249v24.426H123.07zM97.142 43.778c-13.275 0-21.24-8.378-21.24-21.83C75.902 8.378 83.867 0 97.142 0s21.181 8.378 21.181 21.948c0 13.452-7.906 21.83-21.18 21.83m-9.263-21.83c0 7.965 3.363 12.567 9.263 12.567 5.959 0 9.322-4.602 9.322-12.567 0-8.024-3.363-12.685-9.322-12.685-5.9 0-9.263 4.661-9.263 12.685M56.242.944c8.555 0 15.576 4.248 15.576 12.508 0 5.546-2.832 8.968-7.847 10.325 4.661.472 6.962 2.655 7.257 7.257l.944 11.8H60.55l-.649-9.676c-.236-3.481-1.829-4.602-5.9-4.602h-6.195v14.278H36.241V.944zm-8.437 18.349h6.313c3.835 0 5.9-1.593 5.9-4.484 0-3.009-2.065-4.602-5.9-4.602h-6.313zM0 .944h30.621v9.263H11.564v7.552h17.995v9.204H11.564v15.871H0z"
                        />
                    </svg>
                </AnimateAppearence>
                <span className="mt-4 flex items-baseline justify-between lg:mt-4 xl:mt-8">
                    <AnimateAppearence className="w-7/12" delay={0.6} duration={4} initialY={10}>
                        <svg
                            aria-hidden="true"
                            className="h-auto w-full"
                            fill="none"
                            viewBox="0 0 381 21"
                        >
                            <title>{title2}</title>
                            <path
                                fill="#909732"
                                d="M0 20.328V.448h7.112c5.18 0 7.756 1.764 7.756 5.516 0 2.324-1.456 3.836-3.976 4.088 3.08.252 4.816 1.932 4.816 4.648 0 3.668-2.604 5.628-7.476 5.628zm3.64-3.08h4.648c2.268 0 3.696-.952 3.696-2.8 0-1.82-1.4-2.8-3.696-2.8H3.64zm0-8.456h3.696c2.38 0 3.808-.896 3.808-2.604 0-1.792-1.344-2.66-3.808-2.66H3.64zM27.225.448c4.116 0 7.028 2.212 7.028 5.992 0 2.436-1.512 4.144-3.472 4.704 2.044.308 2.94 1.344 3.136 3.444l.504 5.74h-3.668l-.42-5.208c-.14-1.736-1.176-2.296-3.696-2.296h-4.088v7.504h-3.64V.448zm-4.676 9.184h4.284c2.352 0 3.668-1.036 3.668-2.968 0-1.96-1.316-3.052-3.668-3.052h-4.284zM37.27.448h13.385v3.164H40.91v5.18h9.408v3.136H40.91v5.236h9.968v3.164H37.27zM52.642.448h3.836l3.668 14.84 3.64-14.84h3.388l3.696 14.84L74.482.448h3.836l-5.32 19.88h-4.032L65.494 7l-3.5 13.328H57.99zM80.666.448h3.64v19.88h-3.64zM88.227.448h4.256l8.456 14.756V.448h3.668v19.88h-4.396L91.867 5.964v14.364h-3.64zM125.275 20.328h-2.324l-.224-3.024c-.896 2.1-3.276 3.472-5.992 3.472-5.656 0-9.24-4.508-9.24-10.36 0-5.88 3.556-10.416 9.408-10.416 4.424 0 7.392 2.632 8.288 6.832l-3.78.196c-.588-2.408-2.128-3.864-4.564-3.864-3.864 0-5.572 3.22-5.572 7.252 0 4.004 1.736 7.196 5.572 7.196 2.856 0 4.48-1.96 4.788-4.648h-4.816V10.08h8.456zM132.748.448h3.836l3.668 14.84 3.64-14.84h3.388l3.696 14.84 3.612-14.84h3.836l-5.32 19.88h-4.032L145.6 7l-3.5 13.328h-4.004zM160.773.448h3.64v19.88h-3.64zM182.558.448v3.164h-6.048v16.716h-3.64V3.612h-6.02V.448zM184.973 20.328V.448h3.64v8.288h8.204V.448h3.64v19.88h-3.64V11.9h-8.204v8.428zM227.175 20.328h-2.324l-.224-3.024c-.896 2.1-3.276 3.472-5.992 3.472-5.656 0-9.24-4.508-9.24-10.36 0-5.88 3.556-10.416 9.408-10.416 4.424 0 7.392 2.632 8.288 6.832l-3.78.196c-.588-2.408-2.128-3.864-4.564-3.864-3.864 0-5.572 3.22-5.572 7.252 0 4.004 1.736 7.196 5.572 7.196 2.856 0 4.48-1.96 4.788-4.648h-4.816V10.08h8.456zM238.503.448c4.116 0 7.028 2.212 7.028 5.992 0 2.436-1.512 4.144-3.472 4.704 2.044.308 2.94 1.344 3.136 3.444l.504 5.74h-3.668l-.42-5.208c-.14-1.736-1.176-2.296-3.696-2.296h-4.088v7.504h-3.64V.448zm-4.676 9.184h4.284c2.352 0 3.668-1.036 3.668-2.968 0-1.96-1.316-3.052-3.668-3.052h-4.284zM248.549.448h13.384v3.164h-9.744v5.18h9.408v3.136h-9.408v5.236h9.968v3.164h-13.608zM265.216.448H278.6v3.164h-9.744v5.18h9.408v3.136h-9.408v5.236h9.968v3.164h-13.608zM281.691.448h4.256l8.456 14.756V.448h3.668v19.88h-4.396l-8.344-14.364v14.364h-3.64zM308.051 20.328V.448h3.64v8.288h8.204V.448h3.64v19.88h-3.64V11.9h-8.204v8.428zM335.608 20.776c-5.908 0-9.492-3.948-9.492-10.36C326.116 3.948 329.7 0 335.608 0c5.936 0 9.464 3.948 9.464 10.416 0 6.412-3.528 10.36-9.464 10.36m-5.684-10.36c0 4.48 2.1 7.196 5.684 7.196s5.712-2.716 5.712-7.196c0-4.536-2.128-7.252-5.712-7.252s-5.684 2.716-5.684 7.252M355.319.448c4.648 0 7.42 2.38 7.42 6.328 0 3.976-2.772 6.384-7.42 6.384h-4.06v7.168h-3.64V.448zm-4.06 9.548h3.892c2.464 0 3.836-1.092 3.836-3.22 0-2.072-1.344-3.164-3.836-3.164h-3.892zM368.593 13.636c.42 2.324 2.072 3.864 4.788 3.864 2.1 0 3.528-.84 3.528-2.464-.028-1.652-1.428-2.604-4.816-3.444-3.976-.952-6.776-2.66-6.776-5.852 0-3.528 2.912-5.74 7.168-5.74 4.396 0 7.364 2.716 7.784 6.608l-3.668.168c-.28-2.212-1.848-3.64-4.172-3.64-2.016 0-3.444 1.036-3.388 2.66.028 1.904 2.324 2.492 4.592 3.08 4.144.98 7 2.856 7 5.964 0 3.752-3.332 5.824-7.42 5.824-4.676 0-7.98-2.66-8.316-6.804z"
                            />
                        </svg>
                    </AnimateAppearence>
                    <AnimateAppearence
                        className="sm:text-md ml-2 text-sm text-[#909732] lg:text-lg"
                        delay={0.8}
                        duration={2}
                        initialX={-10}
                        initialY={0}
                    >
                        Harvest 2025
                    </AnimateAppearence>
                </span>
                {collection.description && (
                    <AnimateAppearence
                        className="mt-12 max-w-4xl sm:max-w-10/12 2xl:max-w-6xl"
                        delay={0.6}
                        duration={1}
                        ease="easeInOut"
                        initialY={0}
                    >
                        <Markdown className="prose-p:text-base! lg:prose-p:text-lg! text-pretty">
                            {collection.description}
                        </Markdown>
                    </AnimateAppearence>
                )}
            </Container>
            {heroPhoto && (
                <div className="-mt-8 w-full px-2 lg:-mt-10 xl:-mt-14">
                    <Image
                        alt={heroPhoto.title}
                        className="sticky top-0 z-50 w-full rounded"
                        height={heroPhoto.hero.height}
                        priority={true}
                        quality={85}
                        src={heroPhoto.hero.url}
                        width={heroPhoto.hero.width}
                    />
                </div>
            )}
        </>
    );
};

export default GreenHopHeader;
